services:
  # Проект p1: mcp.justgpt.ru/p/p1/mcp
  mcp_p1:
    image: mcp-service:local
    build:
      context: ..
    environment:
      MCP_SERVICE_CONFIG: /app/project.yml
      MCP_BEARER_TOKEN: ${MCP_P1_BEARER_TOKEN}
    volumes:
      - ./projects/p1.yml:/app/project.yml:ro
      - ../examples:/app/examples:ro
    ports:
      - "127.0.0.1:19001:8080"
    restart: unless-stopped

  # Проект p2: mcp.justgpt.ru/p/p2/mcp
  mcp_p2:
    image: mcp-service:local
    build:
      context: ..
    environment:
      MCP_SERVICE_CONFIG: /app/project.yml
      MCP_BEARER_TOKEN: ${MCP_P2_BEARER_TOKEN}
    volumes:
      - ./projects/p2.yml:/app/project.yml:ro
      - ../examples:/app/examples:ro
    ports:
      - "127.0.0.1:19002:8080"
    restart: unless-stopped

  # Проект tw: mcp.justgpt.ru/p/tw/mcp (Timeweb Cloud OpenAPI)
  mcp_tw:
    image: mcp-service:local
    build:
      context: ..
    environment:
      MCP_SERVICE_CONFIG: /app/project.yml
      MCP_BEARER_TOKEN: ${MCP_TW_BEARER_TOKEN}
      TIMEWEB_TOKEN: ${TIMEWEB_TOKEN}
    volumes:
      - ./projects/tw.yml:/app/project.yml:ro
      - ../examples:/app/examples:ro
    ports:
      - "127.0.0.1:19004:8080"
    restart: unless-stopped
